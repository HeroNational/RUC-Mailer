<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <title>Éditeur de Template Email</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      #editor {
        width: 100%;
        height: 300px;
      }
      #preview {
        border: 1px solid #ccc;
        padding: 10px;
        margin-top: 20px;
      }
      button {
        padding: 10px 20px;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <h1>Éditeur de Template Email</h1>
    <!-- Zone d'édition du MJML -->
    <textarea id="editor">
<mjml>
  <mj-body background-color="#f2f2f2">
    <mj-section background-color="#ffffff" padding="20px">
      <mj-column>
        <mj-text align="center" font-size="18px" color="#333" font-weight="bold">
          RUC France
        </mj-text>
      </mj-column>
    </mj-section>
    <mj-section background-color="#ffffff" padding="20px">
      <mj-column>
        <mj-text font-size="14px" color="#333">
          Bonjour,<br/><br/>
          Nous tenons à vous remercier pour votre présence lors du lancement de Raise-Up Cameroon France !
        </mj-text>
      </mj-column>
    </mj-section>
  </mj-body>
</mjml>
    </textarea>
    <br/>
    <button id="previewBtn">Prévisualiser</button>
    <div id="preview">Le rendu apparaîtra ici...</div>
    
    <script src="https://cdn.jsdelivr.net/npm/mjml-browser@4.15.3/lib/index.min.js"></script>
    <!-- Chargement de la bibliothèque MJML Browser 4.15.3 en mode module -->
    <script>
      
      function convertMJML() {
        const mjmlCode = document.getElementById('editor').value;
        var mjml2html = require('mjml-browser')

        const result = mjml2html(mjml, { minify: true })
        //const result = mjml2html(mjmlCode, { minify: true });
        if (result.errors && result.errors.length > 0) {
          alert("Erreurs lors de la conversion MJML : " + result.errors.map(e => e.formattedMessage).join("\n"));
        } else {
          document.getElementById('preview').innerHTML = result.html;
        }
      }
      
      document.getElementById('previewBtn').addEventListener('click', convertMJML);
    </script>
  </body>
</html>
